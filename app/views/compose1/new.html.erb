<% content_for :title, _('Make - Field Papers') %>

  <div id="big-map-menu">

     <!-- SEARCH FIELD -->
        <div class="atlas-search-field">
          <form id="map-location-search">
            <input id="searchTextField" class="map-location-search-box" type="text" name="searchBox" placeholder="Jump to a location" value="">
          </form>
        </div>

      <!-- BEGINNING OF TABS -->
      <div class='menu-tabs'>
        <%= form_for :atlas do |f| %>
        <input type='radio' name='tabs' id='tab1' class='menu-tabs-input' checked='checked'>
          <label for='tab1' class='menu-tabs-label'>
            <div>Atlas Info</div>
          </label>
        <div id="tab-content1" class='tab-content'>
          <div class="atlas-location-and-name">
          
            <%= f.hidden_field :zoom, :value => @atlas.zoom %>
            <%= f.hidden_field :west, :value => @atlas.west %>
            <%= f.hidden_field :south, :value => @atlas.south %>
            <%= f.hidden_field :east, :value => @atlas.east %>
            <%= f.hidden_field :north, :value => @atlas.north %>
            <%= f.hidden_field :rows, :value => @atlas.rows %>
            <%= f.hidden_field :cols, :value => @atlas.cols %>

            <div id="printing-information">
              <%= f.label :title, _("Name your atlas") %>
              <%= f.text_field :title %>
              <%= f.label :text, _("Notes") %>
              <%= f.text_area :text %>

              <div class="include-notes">
                <%= f.check_box :layout %>
                <%= f.label :layout, _("Print Notes") %>
                <div class='tooltips-container'><div data-tooltip="If you choose to include notes, your map will be printed on the top half a page with notes displayed on the bottom half. Otherwise, maps will be displayed on a full page." class="tooltips">(?)</div></div>
              </div>
              <div class="private-map">
                <%= f.check_box :private %>
                <%= f.label :private, _("Keep atlas private") %>
                <div class='tooltips-container'><div data-tooltip="Private atlases can only be accessed if you're logged in, or via a URL provided to you in the final step." class="tooltips">(?)</div></div>
              </div>

            </div><!-- printing-information -->
          </div><!-- atlas-location-and-name -->
        </div><!-- tab-content -->
           

        <input type='radio' name='tabs' id='tab2' class='menu-tabs-input'>
        <label for='tab2' class='menu-tabs-label'>
          <div>Grid Layout</div>
        </label>

        <div id="tab-content2" class='tab-content'>
          <div class="page-sizing-and-orientation" id='page-layout'>
            <div class="page-layout-group">
              <%= f.label :paper_size, _("Paper Size") %>
              <%= f.select :paper_size, options_for_select([["Letter", "letter"], ["A3", "a3"], ["A4", "a4"]]) %>
            </div><!--page-layout-group-->
            <div class="page-layout-group">
              <%= f.label :orientation, _("Orientation") %>
              <%= f.select :orientation, options_for_select([["Landscape", "landscape"], ["Portrait", "portrait"]]) %>
            </div><!--page-layout-group-->
          </div><!--page-sizing-and-orientation-->
          <%= f.label :provider, _("Basemap") %>
          <%= f.select :provider, options_for_select(Providers.options, [Providers.default]) %>

        </div><!--tab-content-->

        <input type='radio' name='tabs' id='tab3' class='menu-tabs-input'>
        <label for='tab3' class='menu-tabs-label'>
          <div>Add-ons</div>
        </label>

        <div id="tab-content3" class='tab-content'>
          <div class="add-ons">
            <%= f.check_box :utm_grid%>
            <%= f.label :utm_grid, _("UTM Grid")  %>

            <div class='tooltips-container'>
              <div data-tooltip="Click for more information." class="tooltips">(<a href="https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system" target="_blank">?</a>)</div>
            </div> <!--tooltips-container-->

            <br />
          </div><!--add-ons-->
        </div><!--tab-content-->
      </div><!--menu-tabs-->

      <%= f.submit _("Make Atlas"), {:id => "final-step"} %>
      <% end %>
      <%= link_to _("Cancel"),  root_path, :method => :get, :class => 'cancel'%>

  </div><!-- menu -->

  <div id="map" class="leaflet-pagelayout-container leaflet-fade-anim">
    <div class="field-papers-logo">
      <%= image_tag "logo-header.png" %>
    </div>

  <div class='col-row-modifiers'>

    <div class="col-row-modifiers-group">
      
      <div class="grid-modifier-group">
        <div class="grid-modifier minus">-</div>
        <div class="grid-modifier number">2</div>
        <div class="grid-modifier plus">+</div>
      </div> <!-- grid-modifier-group -->
    </div> <!-- col-row-modifier-group -->

    <div class="col-row-modifiers-group">
      
      <div class="grid-modifier-group">
        <div class="grid-modifier minus">-</div>
        <div class="grid-modifier number">1</div>
        <div class="grid-modifier plus">+</div>
      </div> <!-- grid-modifier-group -->
    </div> <!-- col-row-modifier-group -->

  </div> <!-- col-row-modifiers -->
</div><!-- map -->

<% content_for :foot do %>

<script>
var tp = <%= Providers.layers.to_json.html_safe %>;
  $(function(){
    var settings = {
      selector: 'map',
      initialView: [[<%= @initial_lat %>, <%= @initial_lon %>], <%= @initial_zoom %>],
      tileProviders: <%= Providers.layers.to_json.html_safe %>,
      defaultProvider: "<%= Providers.default %>"
    }
    FP.map.compose.select(settings);
  });
</script>
<% end %>
