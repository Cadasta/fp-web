<% content_for :title, _('Make - Field Papers') %>

  <div id="big-map-menu">

     <!-- SEARCH FIELD -->
        <div class="atlas-search-field">
          <form id="map-location-search">
            <input id="searchTextField" class="map-location-search-box" type="text" name="searchBox" placeholder="Jump to a location" value="">
          </form>
        </div>

      <!-- BEGINNING OF ACCORDION -->
      <div class='accordion'>
        <div class="accordion-group selected-group">
        <div class="atlas-location-and-name">
        <div class="accordion-header">
          <h5>Atlas Information</h5>
          <div class='box'>
            <div class='up-arrow'></div>
          </div>
        </div>
        <div class="accordion-body">

        <%= form_for :atlas do |f| %>
          <%= f.hidden_field :zoom, :value => @atlas.zoom %>
          <%= f.hidden_field :west, :value => @atlas.west %>
          <%= f.hidden_field :south, :value => @atlas.south %>
          <%= f.hidden_field :east, :value => @atlas.east %>
          <%= f.hidden_field :north, :value => @atlas.north %>
          <%= f.hidden_field :rows, :value => @atlas.rows %>
          <%= f.hidden_field :cols, :value => @atlas.cols %>

          <div id="printing-information">
            <%= f.label :title, _("Name your atlas") %>
            <%= f.text_field :title %>
            <%= f.label :text, _("Notes") %>
            <%= f.text_area :text %>

            <div class="include-notes">
              <%= f.check_box :layout %>
              <%= f.label :layout, _("Print Notes") %>
              <div class='tooltips-container'><div data-tooltip="If you choose to include notes, your map will be printed on the top half a page with notes displayed on the bottom half. Otherwise, maps will be displayed on a full page." class="tooltips">(?)</div></div>
            </div>
            <div class="private-map">
              <%= f.check_box :private %>
              <%= f.label :private, _("Keep atlas private") %>
              <div class='tooltips-container'><div data-tooltip="Private atlases can only be accessed if you're logged in, or via a URL provided to you in the final step." class="tooltips">(?)</div></div>
            </div>

          </div>
          </div> <!-- atlas-location-and-name -->
          </div>
          </div>

          <div class="accordion-group">
          <div class="accordion-header"><h5>Grid Layout</h5><div class='box'>
  <div class='down-arrow'></div>
</div></div>
          <div class="accordion-body">
          <div class="page-sizing-and-orientation" id='page-layout'>
            <div class="page-layout-group">
              <%= f.label :paper_size, _("Paper Size") %>
              <%= f.select :paper_size, options_for_select([["Letter", "letter"], ["A3", "a3"], ["A4", "a4"]]) %>
            </div>
            <div class="page-layout-group">
              <%= f.label :orientation, _("Orientation") %>
              <%= f.select :orientation, options_for_select([["Landscape", "landscape"], ["Portrait", "portrait"]]) %>
            </div>
          </div>
          <%= f.label :provider, _("Basemap") %>
          <%= f.select :provider, options_for_select(Providers.options, [Providers.default]) %>

      
      </div>
      </div>

      <div class="accordion-group">
      <div class="accordion-header"><h5>Add - ons</h5><div class='box'>
  <div class='down-arrow'></div>
</div></div>
      <div class="accordion-body">
      <div class="add-ons">
        <%= f.check_box :utm_grid%>
        <%= f.label :utm_grid, _("UTM Grid")  %><div class='tooltips-container'><div data-tooltip="Click for more information." class="tooltips">(<a href="https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system" target="_blank">?</a>)</div></div> <br />

      </div>
      </div>
      </div>
    </div>
      <%= f.submit _("Make Atlas"), {:id => "final-step"} %>
      <% end %>
      <%= link_to _("Cancel"),  root_path, :method => :get, :class => 'cancel'%>


  </div><!-- menu -->

  <div id="map" class="leaflet-pagelayout-container leaflet-fade-anim">
    <div class="field-papers-logo">
      <%= image_tag "logo-header.png" %>
    </div>

  <div class='col-row-modifiers'>

    <div class="col-row-modifiers-group">
      
      <div class="grid-modifier-group">
        <div class="grid-modifier minus">-</div>
        <div class="grid-modifier number">2</div>
        <div class="grid-modifier plus">+</div>
      </div> <!-- grid-modifier-group -->
    </div> <!-- col-row-modifier-group -->

    <div class="col-row-modifiers-group">
      
      <div class="grid-modifier-group">
        <div class="grid-modifier minus">-</div>
        <div class="grid-modifier number">1</div>
        <div class="grid-modifier plus">+</div>
      </div> <!-- grid-modifier-group -->
    </div> <!-- col-row-modifier-group -->

  </div> <!-- col-row-modifiers -->

  <form id='degrees'>
    <input type="range" id="rangeInput" name="rangeInput" min="0" max="90" value='0'>
  </form>
</div><!-- map -->

<% content_for :foot do %>

<script>
var tp = <%= Providers.layers.to_json.html_safe %>;
  $(function(){
    var settings = {
      selector: 'map',
      initialView: [[<%= @initial_lat %>, <%= @initial_lon %>], <%= @initial_zoom %>],
      tileProviders: <%= Providers.layers.to_json.html_safe %>,
      defaultProvider: "<%= Providers.default %>"
    }
    FP.map.compose.select(settings);
  });
</script>
<% end %>
